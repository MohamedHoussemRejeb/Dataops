spring.application.name=dataops-api

# --- DataSource ---
spring.datasource.url=jdbc:postgresql://localhost:5433/governance
spring.datasource.username=admin
spring.datasource.password=admin
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA / Hibernate ---
# Avec Flyway, on valide le schema (ne pas laisser "update" en prod)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
# (facultatif) si ton schema n'est pas "public"
# spring.jpa.properties.hibernate.default_schema=public

# --- Flyway ---
spring.flyway.enabled=false
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# --- Web ---
server.port=8083

# --- JSON dates en ISO 8601 (pas en timestamps longs) ---
spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false
spring.jackson.time-zone=UTC

# --- Upload CSV (taille max) ---
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# --- Logs ---
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql=INFO

# --- Securite Spring par defaut (desactivee) ---
# Tu n'utilises PAS l'utilisateur en mï¿½moire de Spring Security
# spring.security.user.name=admin
# spring.security.user.password=admin

# --- Profils Spring ---
spring.profiles.active=db

# --- Securite / Keycloak : Resource Server JWT ---
# Realm : dataops
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8181/realms/dataops
# (optionnel, Spring peut le deduire a partir de issuer-uri)
# spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8181/realms/dataops/protocol/openid-connect/certs

# --- LLM Providers ---
llm.openai.apiKey=${OPENAI_API_KEY:}
llm.openai.defaultModel=gpt-4o-mini
llm.openai.endpoint=https://api.openai.com/v1/chat/completions

llm.ollama.endpoint=http://localhost:11434/api/chat
llm.ollama.defaultModel=llama3.1

# --- OpenRouter ---
llm.openrouter.apiKey=${OPENROUTER_API_KEY:}
llm.openrouter.endpoint=https://openrouter.ai/api/v1/chat/completions
llm.openrouter.defaultModel=anthropic/claude-3.5-sonnet
llm.openrouter.referer=http://localhost:8090
llm.openrouter.title=DataOps Chatbot
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.properties.max.block.ms=1000

# --- Keycloak Admin (pour Access Matrix) ---
keycloak.admin.base-url=http://localhost:8181
keycloak.admin.admin-realm=master
keycloak.admin.target-realm=dataops
keycloak.admin.client-id=admin-cli
keycloak.admin.username=admin
keycloak.admin.password=admin

